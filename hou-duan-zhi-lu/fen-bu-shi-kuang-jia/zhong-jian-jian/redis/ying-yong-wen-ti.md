# 应用问题

### 一.缓存穿透

请求一个不存在的数据，可能会导致请求穿透到存储层。

解决方法：

* 设置访问白名单，限制访问。
* Bloom Filter。
* 对空值进行缓存，设置一个较短的过期时间，如5分钟。
* 监控redis命中率，如果有恶意访问，黑名单限制。

### 二.缓存击穿

某一个key在redis中存在，但是过期，请求击穿了缓存层到达了存储层。

解决方法：

* 预设热门数据。
* 实时调整，将热门数据的过期时间延长。
* 访问存储层的时候使用分布式锁，只要有一个服务重设了缓存，其他服务都不用再访问存储层。

### 三.缓存雪崩

大量的key在redis中过期，类似于雪崩一样。

解决方法：

* 使用多级缓存。
* 访问存储系统的时候加锁。
* 使用后台线程检查key的过期时间，实时更新。
* 过期时间上加一个随机值，防止同时过期。

### 四.布隆过滤器

布隆过滤器（Bloom Filter）是 1970 年由布隆提出的。它实际上是一个很长的二进制向量和一系列随机映射函数。

布隆过滤器可以用于检索一个元素是否在一个集合中。**它的优点是空间效率和查询时间都比一般的算法要好的多，缺点是有一定的误识别率和删除困难**。

当我们搜索一个值的时候，若该值经过 K 个哈希函数运算后的任何一个索引位是0，那么该值肯定不在集合中。但如果所有哈希索引值都是1，则只能说该搜索的值可能存在集合中。
